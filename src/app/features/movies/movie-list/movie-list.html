<main class="max-w-7xl mx-auto px-8 py-8 bg-slate-900 min-h-screen text-white">
  <h1 class="text-4xl font-bold mb-8 text-center">
    🎬 Películas Populares
  </h1>

  @if (loading()) {
    <p class="text-center text-xl">⏳ Cargando películas...</p>
  }

  @if (!loading() && movies().length > 0) {
    <ul class="grid grid-cols-[repeat(auto-fill,minmax(200px,1fr))] gap-6 list-none p-0">
      @for (movie of movies(); track movie.id) {
        <li
        (click)="goToDetail(movie.id)"
        class="bg-slate-800 rounded-lg p-4 shadow-lg transition-transform hover:-translate-y-1 cursor-pointer">
          <img
            [src]="getImageUrl(movie.poster_path)"
            [alt]="movie.title"
            class="w-full h-[300px] object-cover rounded mb-3"
          />
          <h2 class="text-base font-semibold mb-2 overflow-hidden text-ellipsis whitespace-nowrap">
            {{ movie.title }}
          </h2>
          <p class="text-sm text-slate-400 mb-1">
            📅 {{ movie.release_date }}
          </p>
          <p class="text-sm text-amber-400 font-semibold">
            ⭐ {{ movie.vote_average.toFixed(1) }}
          </p>
        </li>
      }
    </ul>
  }


  <div #scrollTrigger class="h-px"></div>

<!-- Estados de carga -->
@if (loadingMore()) {
  <div class="text-center py-12">
    <div class="text-5xl animate-spin inline-block mb-4">🎬</div>
    <p class="text-xl">Cargando más películas...</p>
  </div>
}

@if (!loadingMore() && hasMore()) {
  <div class="text-center py-12">
    <button
      (click)="loadMore()"
      class="px-8 py-4 bg-slate-800 hover:bg-slate-700 rounded-lg transition-colors text-lg font-semibold"
    >
      🎬 Cargar más películas
    </button>
    <p class="text-sm text-slate-400 mt-3">
      Mostrando {{ movies().length }} de {{ totalPages() * 20 }} películas
    </p>
  </div>
}

@if (!hasMore()) {
  <div class="text-center py-12 text-slate-400">
    <p class="text-2xl mb-2">✅ ¡Lo has visto todo!</p>
    <p class="text-base">Has descubierto {{ movies().length }} películas populares</p>
  </div>
}

</main>
